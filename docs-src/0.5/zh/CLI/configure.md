# é…ç½®é¡¹ç›®

æœ¬ç« å°†æ•™ä½ å¦‚ä½•ä½¿ç”¨ `Dioxus.toml` æ–‡ä»¶é…ç½® CLIã€‚è¿™é‡Œæœ‰ä¸€ä¸ª [ç¤ºä¾‹](#config-example)ï¼Œå…¶ä¸­æœ‰æ³¨é‡Šæ¥æè¿°æ¯ä¸ªé”®ã€‚ä½ å¯ä»¥å¤åˆ¶å®ƒï¼Œæˆ–è€…æŸ¥çœ‹æœ¬æ–‡æ¡£ä»¥è·å–æ›´å®Œæ•´çš„å­¦ä¹ ä½“éªŒã€‚

"ğŸ”’" è¡¨ç¤ºå¿…å¡«é¡¹ã€‚ä¸€äº›æ ‡é¢˜æ˜¯å¿…å¡«çš„ï¼Œä½†å®ƒä»¬å†…éƒ¨çš„é”®ä¸æ˜¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦åŒ…å«æ ‡é¢˜ï¼Œä½†ä¸éœ€è¦åŒ…å«é”®ã€‚è¿™å¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œä½†æ˜¯å¾ˆæ­£å¸¸ã€‚

## ç»“æ„

æ¯ä¸ªæ ‡é¢˜ä¸‹é¢ç›´æ¥æ˜¯å…¶ TOML è¡¨å•ã€‚

### åº”ç”¨ç¨‹åº ğŸ”’

```toml
[application]
```

åº”ç”¨ç¨‹åºèŒƒå›´çš„é…ç½®ã€‚é€‚ç”¨äº Web å’Œæ¡Œé¢åº”ç”¨ã€‚

* **name** ğŸ”’ - é¡¹ç›®åç§°å’Œæ ‡é¢˜ã€‚
  ```toml
  name = "my_project"
  ```
* **default_platform** ğŸ”’ - æ­¤é¡¹ç›®çš„ç›®æ ‡å¹³å°
  ```toml
    # å½“å‰æ”¯æŒçš„å¹³å°ï¼šwebï¼Œdesktop
    default_platform = "web"
  ```
* **out_dir** - å°† `dx build` æˆ– `dx serve` çš„æ„å»ºç»“æœè¾“å‡ºçš„ç›®å½•ã€‚è¿™ä¹Ÿæ˜¯ `assets` ç›®å½•å°†è¢«å¤åˆ¶åˆ°çš„ä½ç½®ã€‚
  ```toml
  out_dir = "dist"
  ```
* **asset_dir** - åŒ…å«é™æ€èµ„äº§çš„ç›®å½•ã€‚CLI å°†åœ¨æ„å»º/æœåŠ¡ä¹‹åè‡ªåŠ¨å°†è¿™äº›èµ„äº§å¤åˆ¶åˆ° **out_dir** ä¸­ã€‚
  ```toml
  asset_dir = "public"
  ```
- **sub_package** - é»˜è®¤æƒ…å†µä¸‹è¦æ„å»ºçš„å·¥ä½œåŒºä¸­çš„å­åŒ…ã€‚
  ```toml
  sub_package = "my-crate"
  ```

### Web.App ğŸ”’

```toml
[web.app]
```

Web ç‰¹å®šçš„é…ç½®ã€‚

* **title** - ç½‘é¡µæ ‡é¢˜ã€‚
  ```toml
  # HTML æ ‡é¢˜æ ‡ç­¾å†…å®¹
  title = "project_name"
  ```
* **base_path** - ä¸ºåº”ç”¨ç¨‹åºæ„å»ºçš„åŸºæœ¬è·¯å¾„ã€‚å½“åœ¨åŸŸåçš„å­ç›®å½•ä¸‹æœåŠ¡åº”ç”¨ç¨‹åºæ—¶ï¼Œè¿™å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨æ„å»ºè¦åœ¨ GitHub Pages ä¸Šæä¾›æœåŠ¡çš„ç«™ç‚¹æ—¶ã€‚
  ```toml
  # åº”ç”¨ç¨‹åºå°†åœ¨ domain.com/my_application/ å¤„æä¾›æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°† base_path ä¿®æ”¹ä¸ºåº”ç”¨ç¨‹åºå°†è¢«æœåŠ¡çš„è·¯å¾„
  base_path = "my_application"
  ```

### Web.Watcher ğŸ”’

```toml
[web.watcher]
```

å¼€å‘æœåŠ¡å™¨é…ç½®ã€‚

* **reload_html** - å¦‚æœä¸º trueï¼Œåˆ™æ¯æ¬¡é‡æ–°æ„å»ºåº”ç”¨ç¨‹åºæ—¶ CLI å°†é‡æ–°æ„å»º index.html æ–‡ä»¶
  ```toml
  reload_html = true
  ```
* **watch_path** - è¦ç›‘è§†æ›´æ”¹çš„æ–‡ä»¶å’Œç›®å½•
  ```toml
  watch_path = ["src", "public"]
  ```

* **index_on_404** - å¦‚æœå¯ç”¨ï¼Œå½“æ‰¾ä¸åˆ°è·¯ç”±æ—¶ Dioxus å°†æä¾›æ ¹é¡µé¢ã€‚
  *å½“æœåŠ¡ä½¿ç”¨è·¯ç”±å™¨çš„åº”ç”¨ç¨‹åºæ—¶éœ€è¦æ­¤é€‰é¡¹*ã€‚ä½†æ˜¯ï¼Œå½“ä½¿ç”¨é Dioxus çš„ä¸œè¥¿ï¼ˆä¾‹å¦‚ GitHub Pagesï¼‰æä¾›åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ éœ€è¦æ£€æŸ¥å¦‚ä½•åœ¨è¯¥å¹³å°ä¸Šé…ç½®å®ƒã€‚åœ¨ GitHub Pages ä¸Šï¼Œä½ å¯ä»¥å°†åä¸º `404.html` çš„ `index.html` çš„å‰¯æœ¬æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚
  ```toml
  index_on_404 = true
  ```

### Web.Resource ğŸ”’

```toml
[web.resource]
```

é™æ€èµ„æºé…ç½®ã€‚

* **style** - è¦åŒ…å«åœ¨åº”ç”¨ç¨‹åºä¸­çš„ CSS æ–‡ä»¶ã€‚
  ```toml
  style = [
  # ä» public_dir åŒ…å«ã€‚
  "./assets/style.css",
  # æˆ–æ¥è‡ªåœ¨çº¿ CDN çš„èµ„äº§ã€‚
  "https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.css"
  ]
  ```

* **script** - è¦åŒ…å«åœ¨åº”ç”¨ç¨‹åºä¸­çš„ JavaScript æ–‡ä»¶ã€‚
  ```toml
  script = [
  # ä» asset_dir åŒ…å«ã€‚
  "./public/index.js",
  # æˆ–æ¥è‡ªåœ¨çº¿ CDNã€‚
  "https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.js"
  ]
  ```

### Web.Resource.Dev ğŸ”’

```toml
[web.resource.dev]
```

è¿™ä¸ [`[web.resource]`](#webresource-) ç›¸åŒï¼Œä½†ä»…åœ¨å¼€å‘æœåŠ¡å™¨ä¸­æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åœ¨ `dx serve` æœåŠ¡å™¨ä¸­åŒ…å«ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¸åœ¨ `dx serve --release` æœåŠ¡å™¨ä¸­åŒ…å«ï¼Œé‚£ä¹ˆå°†å®ƒæ”¾åœ¨è¿™é‡Œã€‚

### Web.Proxy

```toml
[[web.proxy]]
```

ä¸å¼€å‘è¿‡ç¨‹ä¸­åº”ç”¨ç¨‹åºéœ€è¦çš„ä»»ä½•ä»£ç†ç›¸å…³çš„é…ç½®ã€‚ä»£ç†å°†è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªæ–°çš„æœåŠ¡ã€‚

* **backend** - è¦ä»£ç†çš„æœåŠ¡å™¨çš„ URLã€‚CLI å°†æŠŠä»»ä½•ä½äºåç«¯ç›¸å¯¹è·¯å¾„ä¸‹çš„è¯·æ±‚è½¬å‘åˆ°åç«¯ï¼Œè€Œä¸æ˜¯è¿”å› 404
  ```toml
  backend = "http://localhost:8000/api/"
  ```
  è¿™å°†å¯¼è‡´ä»»ä½•å‘é€åˆ°å…·æœ‰å‰ç¼€ /api/ çš„å¼€å‘æœåŠ¡å™¨çš„è¯·æ±‚è¢«é‡å®šå‘åˆ°æœ¬åœ°ä¸»æœºçš„åç«¯æœåŠ¡å™¨ http://localhost:8000ã€‚è·¯å¾„å’ŒæŸ¥è¯¢å‚æ•°å°†åŸæ ·ä¼ é€’ï¼ˆç›®å‰ä¸æ”¯æŒè·¯å¾„é‡å†™ï¼‰ã€‚

## é…ç½®ç¤ºä¾‹

è¿™åŒ…æ‹¬æ‰€æœ‰å­—æ®µï¼Œæ— è®ºæ˜¯å¦å¿…éœ€ã€‚

```toml
[application]

# åº”ç”¨ç¨‹åºåç§°
name = "project_name"

# é»˜è®¤çš„ Dioxus å¹³å°
default_platform = "web"

# `build` & `serve` è¾“å‡ºè·¯å¾„
out_dir = "dist"

# é™æ€èµ„æºè·¯å¾„
asset_dir = "public"

[web.app]

# HTML æ ‡é¢˜æ ‡ç­¾å†…å®¹
title = "project_name"

[web.watcher]

# å½“ç›‘è§†å™¨è§¦å‘æ—¶ï¼Œé‡æ–°ç”Ÿæˆ `index.html`
reload_html = true

# å°†ç›‘è§†çš„æ–‡ä»¶æˆ–ç›®å½•
watch_path = ["src", "public"]

# åŒ…å«æ ·å¼æˆ–è„šæœ¬èµ„äº§
[web.resource]

# CSS æ ·å¼æ–‡ä»¶
style = []

# JavaScript ä»£ç æ–‡ä»¶
script = []

[web.resource.dev]

# ä¸ [web.resource] ç›¸åŒï¼Œä½†ç”¨äºå¼€å‘æœåŠ¡å™¨

# CSS æ ·å¼æ–‡ä»¶
style = []

# JavaScript æ–‡ä»¶
script = []

[[web.proxy]]
backend = "http://localhost:8000/api/"
```
